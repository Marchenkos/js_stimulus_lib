!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@hotwired/stimulus"),require("@rails/request.js")):"function"==typeof define&&define.amd?define(["exports","@hotwired/stimulus","@rails/request.js"],t):t((e||self).jsStimulusLib={},e.Stimulus,e.request_js)}(this,function(e,t,r){function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}var a=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var r=t.prototype;return r.connect=function(){if(this.hasParentTarget&&this.hasCountTarget){var e=this.parentTarget,t=this.setSelectedCount.bind(this);this.childTargets.forEach(function(r){r.addEventListener("change",function(n){r.checked||(e.checked=!1),t()})})}},r.matchAll=function(e){e.preventDefault(),this.childTargets.forEach(function(t){t.checked=e.currentTarget.checked}),this.setSelectedCount(!!e.currentTarget.checked)},r.deselectAll=function(e){e.preventDefault(),this.childTargets.forEach(function(e){e.checked=!1}),this.setSelectedCount()},r.selectAll=function(e){e.preventDefault(),this.childTargets.forEach(function(e){e.checked=!0}),this.setSelectedCount()},r.setSelectedCount=function(e){void 0===e&&(e=!1);var t=Array.from(this.childTargets).filter(function(e){return e.checked}).length;this.countTarget.innerHTML=(e?this.totalValue:t).toLocaleString()},t}(t.Controller);a.targets=["parent","child","count"],a.values={total:Number};var c=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.clear=function(e){e.preventDefault(),this.inputTargets.forEach(function(e){e.value=null}),this.element.closest("form").requestSubmit()},t}(t.Controller);c.targets=["input"];var s=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var i=t.prototype;return i.update=function(e){try{if(e instanceof KeyboardEvent&&"Enter"!==e.key)return Promise.resolve();var t=e.target instanceof HTMLFormElement?e.target:e.target.closest("form");return Promise.resolve(t.requestSubmit()).then(function(){})}catch(e){return Promise.reject(e)}},i.abort=function(e){try{return e.preventDefault(),Promise.resolve(this.requestEdit(e.target,{book_edit:"false"})).then(function(){})}catch(e){return Promise.reject(e)}},i.edit=function(e){try{return this.clearSelection(),Promise.resolve(this.requestEdit(e.target,{book_edit:"true"})).then(function(){})}catch(e){return Promise.reject(e)}},i.requestEdit=function(e,t){void 0===t&&(t={});try{var o=e.closest("td, th").dataset;return Promise.resolve(r.get(o.editUrl,{query:n({},t,{book_attribute:o.attribute}),responseKind:"turbo-stream"})).then(function(){})}catch(e){return Promise.reject(e)}},i.clearSelection=function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},i.tooltipTargetDisconnected=function(e){this.popper.destroy()},t}(t.Controller);s.targets=["tooltip","tooltipTemplate"];var l=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.connect=function(){var e=this;this.childTargets.forEach(function(t){return t.addEventListener("toggle",function(t){t.currentTarget.open&&e.childTargets.forEach(function(e){e!=t.currentTarget&&e.removeAttribute("open")})})})},t}(t.Controller);l.targets=["child"];var u=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.click=function(){this.clickTargets.forEach(function(e){return e.click()})},t}(t.Controller);u.targets=["click"];var f=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var r=t.prototype;return r.connect=function(){this.element[this.identifier]=this},r.addFields=function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget,r=t.dataset.fieldType,n=t.dataset.content,o=(new Date).getTime(),i=new RegExp("new_"+r,"g"),a=n.replace(i,o);t.insertAdjacentHTML("beforebegin",a)},r.removeFields=function(e){e.preventDefault(),e.stopPropagation(),e.currentTarget.closest(".fields").remove()},r.nestFields=function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget,r=t.dataset.fieldType,n=(new Date).getTime(),o=new RegExp("new_"+r,"g"),i=t.closest(".fields").dataset.objectName,a=i.replace(/\]\[|[^-a-zA-Z0-9:.]/g,"_").replace(/_$/,""),c=this.templateTarget.innerHTML;c=(c=(c=c.replace(/new_object_name\[/g,i+"[")).replace(/new_object_name_/,a+"_")).replace(o,n),t.insertAdjacentHTML("beforebegin",c)},t}(t.Controller);f.targets=["template"];var d=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var r=t.prototype;return r.connect=function(){console.log("hello2")},r.toggle=function(e){var t=e.currentTarget,r="sr-only";"true"==t.getAttribute("data-expanded")?(t.setAttribute("data-expanded",!1),this.rowTargets.forEach(function(e){return e.classList.add(r)})):(t.setAttribute("data-expanded",!0),this.rowTargets.forEach(function(e){return e.classList.remove(r)}))},t}(t.Controller);d.targets=["row"];var h=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.connect=function(){var e=this.element.querySelector(".pagy-info b:nth-child(2)");if(e){var t=Number(e.innerText);e.innerText=t.toLocaleString()}},t}(t.Controller);h.targets=[];var p=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var r=t.prototype;return r.connect=function(){0===this.fieldTargets.length&&this.appendChild()},r.add=function(e){e.preventDefault(),this.appendChild()},r.remove=function(e){e.preventDefault(),e.stopPropagation(),e.target.closest(".fields").remove(),this.updateIndexes()},r.appendChild=function(){var e=this.fieldTarget.cloneNode(!0);e.querySelectorAll("select").forEach(function(e){return e.value=null}),this.itemsTarget.appendChild(e),this.updateIndexes()},r.updateIndexes=function(){var e=this;this.fieldTargets.forEach(function(t){var r=t.querySelectorAll("select"),n=r[0],o=r[1];n.name="q[s]["+e.fieldTargets.indexOf(t)+"][name]",n.id="q_s_["+e.fieldTargets.indexOf(t)+"]_name",o.name="q[s]["+e.fieldTargets.indexOf(t)+"][dir]",o.id="q_s_["+e.fieldTargets.indexOf(t)+"]_dir"})},r.clear=function(e){e.preventDefault(),this.element.querySelectorAll("select").forEach(function(e){return e.value=null}),this.element.closest("form").requestSubmit()},t}(t.Controller);p.targets=["items","field"],e.SmartTableCheckboxSet=a,e.SmartTableClearable=c,e.SmartTableColumn=s,e.SmartTableDetailsSet=l,e.SmartTableElement=u,e.SmartTableFilterBy=f,e.SmartTableGroupable=d,e.SmartTablePagy=h,e.SmartTableSortBy=p});
//# sourceMappingURL=index.umd.js.map
